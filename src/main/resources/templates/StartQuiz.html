<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="fragments/header :: header"/>
    <title>About us</title>
    <link type="text/css" rel="stylesheet" href="css/simplePagination.css"/>
</head>
<body style="background-image: url('images/schloss_hohenheim.jpg'); background-repeat: no-repeat; background-size: 100%;">
<div th:replace="fragments/navbar :: loggedIn"></div>
<br/>
<div class="row">
    <div class="callout" th:if="${questions.size() &lt; 4}">
        <h3>Sorry there are not enough questions for a Quiz!</h3>
        <a class="button" th:href="@{/showLearningGroup(id=${learningGroupId})}"><span
                class="fa fa-chevron-left"></span> Go back</a>
    </div>
</div>

<div th:if="${questions.size() &gt; 3}">
    <div class="row">

        <form id="myForm" th:object="${newQuiz}" th:action="@{/submitQuiz(learningGroupId=${learningGroupId})}"
              method="post">

            <div th:each="question,iterStat : ${questions}" class="small-5 medium-centered large-centered columns">

                <input type="hidden" name="questionIds" th:value="${question.id}"/>

                <div style="padding-left: 63px" class="quizBackground paginate">

                    <br/>

                    <h4 style="color: white" th:text="${question.question}"></h4>

                    <br/>

                    <div th:with="answers=${'givenAnswers_' + iterStat.index}">

                        <ul>
                            <li>
                                <input type="checkbox" class="styled" th:field="*{__${answers}__}" th:value="A"
                                       th:id="${iterStat + '1'}"/>
                                <label class="styled" th:for="${iterStat + '1'}"><span
                                        th:text="${question.answerA}"></span></label>
                            </li>
                            <li>
                                <input type="checkbox" class="styled" th:field="*{__${answers}__}" th:value="B"
                                       th:id="${iterStat + '2'}"/>
                                <label class="styled" th:for="${iterStat + '2'}"><span
                                        th:text="${question.answerB}"></span></label>
                            </li>
                            <li>
                                <input type="checkbox" class="styled" th:field="*{__${answers}__}" th:value="C"
                                       th:id="${iterStat + '3'}"/>
                                <label class="styled" th:for="${iterStat + '3'}"><span
                                        th:text="${question.answerC}"></span></label>
                            </li>
                            <li>
                                <input type="checkbox" class="styled" th:field="*{__${answers}__}" th:value="D"
                                       th:id="${iterStat + '4'}"/>
                                <label class="styled" th:for="${iterStat + '4'}"><span
                                        th:text="${question.answerD}"></span></label>
                            </li>
                        </ul>

                    </div>
                    <button th:if="${iterStat.index == 3}" class="button float-center" type="submit">Submit quiz
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="row">
        <div style="padding-top: 20px;" class="small-3 medium-centered large-centered columns" id="page-nav"></div>
    </div>
</div>

<script src="js/app.js"></script>
<script type="text/javascript" src="js/jquery.simplePagination.js"></script>
<script>
    jQuery(function ($) {
        // Grab whatever we need to paginate
        var pageParts = $(".paginate");

        // How many parts do we have?
        var numPages = pageParts.length;
        // How many parts do we want per page?
        var perPage = 1;

        // When the document loads we're on page 1
        // So to start with... hide everything else
        pageParts.slice(perPage).hide();

        // Apply simplePagination to our placeholder
        $("#page-nav").pagination({
            items: numPages,
            itemsOnPage: perPage,
            usePrev: false,
            nextText: 'Next question',
            cssStyle: "light-theme",
            // We implement the actual pagination
            //   in this next function. It runs on
            //   the event that a user changes page
            onPageClick: function (pageNum) {
                // Which page parts do we show?
                var start = perPage * (pageNum - 1);
                var end = start + perPage;

                // First hide all page parts
                // Then show those just for our page
                pageParts.hide()
                        .slice(start, end).show();
            }
        });
    });
</script>
</body>
</html>